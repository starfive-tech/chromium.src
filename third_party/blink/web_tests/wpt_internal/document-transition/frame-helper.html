<!doctype html>

<style>
div {
  width: 100px;
  height: 100px;
  background: green;
}
html { height: 50%; }
::page-transition-container(*) { animation-duration: 500s }
</style>

<div></div>

<script>
function run() {
  document.createDocumentTransition().prepare(() => {
    requestAnimationFrame(() => requestAnimationFrame(() => {
      window.parent.postMessage({}, "*");
    }));
  });
}
onload = requestAnimationFrame(() => requestAnimationFrame(run));
</script>

